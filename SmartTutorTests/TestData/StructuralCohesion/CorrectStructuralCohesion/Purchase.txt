using System;
using System.Collections.Generic;

namespace Classes.Structural
{
public class Purchase
    {
        public int Id { get; }
        public double Cost { get; }
        public List<Pill> PurchasedPills { get; }
        public DateTime PurchaseTime { get; }
        public Pharmacist Pharmacist { get; }

        public Purchase(int id, double cost, List<Pill> purchasedPills, DateTime purchaseTime, Pharmacist pharmacist)
        {
            Id = id;
            Cost = cost;
            PurchasedPills = purchasedPills;
            PurchaseTime = purchaseTime;
            Pharmacist = pharmacist;
        }

        public List<Purchase> GetGranulePurchases(List<Purchase> purchases) 
        {
            // Get only purchases where bought pill is in granule form.
            List<Purchase> granulePurchases = new List<Purchase>();
            foreach (var purchase in purchases)
            {
                foreach (var purchasedPill in purchase.PurchasedPills)
                {
                    if (purchasedPill.Form == PillForm.Granule)
                    {
                        granulePurchases.Add(purchase);
                    }
                }
            }
            return granulePurchases;
        }
    }
}